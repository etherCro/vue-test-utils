(window.webpackJsonp=window.webpackJsonp||[]).push([[255],{431:function(t,e,r){"use strict";r.r(e);var s=r(0),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._m(0),t._v(" "),r("p",[t._v("测试运行器 (test runner) 就是运行测试的程序。")]),t._v(" "),r("p",[t._v("主流的 JavaScript 测试运行器有很多，但 Vue Test Utils 都能够支持。它是与测试运行器无关的。")]),t._v(" "),r("p",[t._v("当然在我们选用测试运行器的时候也需要考虑一些事项：功能集合、性能和对单文件组件预编译的支持等。在仔细比对现有的库之后，我们推荐其中的两个测试运行器：")]),t._v(" "),r("ul",[r("li",[r("p",[r("a",{attrs:{href:"https://jestjs.io/docs/zh-Hans/getting-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jest"),r("OutboundLink")],1),t._v(" 是功能最全的测试运行器。它所需的配置是最少的，默认安装了 JSDOM，内置断言且命令行的用户体验非常好。不过你需要一个能够将单文件组件导入到测试中的预处理器。我们已经创建了 "),r("code",[t._v("vue-jest")]),t._v(" 预处理器来处理最常见的单文件组件特性，但仍不是 "),r("code",[t._v("vue-loader")]),t._v(" 100% 的功能。")])]),t._v(" "),r("li",[r("p",[r("a",{attrs:{href:"https://github.com/zinserjan/mocha-webpack",target:"_blank",rel:"noopener noreferrer"}},[t._v("mocha-webpack"),r("OutboundLink")],1),t._v(" 是一个 webpack + Mocha 的包裹器，同时包含了更顺畅的接口和侦听模式。这些设置的好处在于我们能够通过 webpack + "),r("code",[t._v("vue-loader")]),t._v(" 得到完整的单文件组件支持，但这本身是需要很多配置的。")])])]),t._v(" "),t._m(1),t._v(" "),r("p",[t._v("Vue Test Utils 依赖浏览器环境。技术上讲你可以将其运行在一个真实的浏览器，但是我们并不推荐，因为在不同的平台上都启动真实的浏览器是很复杂的。我们推荐取而代之的是用 "),r("a",{attrs:{href:"https://github.com/tmpvar/jsdom",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSDOM"),r("OutboundLink")],1),t._v(" 在 Node 虚拟浏览器环境运行测试。")]),t._v(" "),r("p",[t._v("Jest 测试运行器自动设置了 JSDOM。对于其它测试运行器来说，你可以在你的测试入口处使用 "),r("a",{attrs:{href:"https://github.com/rstacruz/jsdom-global",target:"_blank",rel:"noopener noreferrer"}},[t._v("jsdom-global"),r("OutboundLink")],1),t._v(" 手动设置 JSDOM。")]),t._v(" "),t._m(2),r("hr"),t._v(" "),t._m(3),t._m(4),t._v(" "),r("p",[t._v("Vue 的单文件组件在它们运行于 Node 或浏览器之前是需要预编译的。我们推荐两种方式完成编译：通过一个 Jest 预编译器，或直接使用 webpack。")]),t._v(" "),t._m(5),t._v(" "),r("p",[t._v("对于不同的设置方式请移步下面的教程：")]),t._v(" "),r("ul",[r("li",[r("router-link",{attrs:{to:"./testing-single-file-components-with-jest.html"}},[t._v("用 Jest 测试单文件组件")])],1),t._v(" "),r("li",[r("router-link",{attrs:{to:"./testing-single-file-components-with-mocha-webpack.html"}},[t._v("用 Mocha 和 webpack 测试单文件组件")])],1)]),t._v(" "),t._m(6),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/eddyerburgh/vue-unit-test-perf-comparison",target:"_blank",rel:"noopener noreferrer"}},[t._v("测试运行器性能比拼"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vue-test-utils-jest-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 Jest 的示例工程"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/vuejs/vue-test-utils-mocha-webpack-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 Mocha 的示例工程"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/eddyerburgh/vue-test-utils-tape-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 tape 的示例工程"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/eddyerburgh/vue-test-utils-ava-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 AVA 的示例工程"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/egoist/tyu",target:"_blank",rel:"noopener noreferrer"}},[t._v("tyu - Delightful web testing by egoist"),r("OutboundLink")],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"选择一个测试运行器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选择一个测试运行器"}},[this._v("#")]),this._v(" 选择一个测试运行器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"浏览器环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器环境"}},[this._v("#")]),this._v(" 浏览器环境")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[this._v("install")]),this._v(" --save-dev jsdom jsdom-global\n")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在测试的设置 / 入口中")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'jsdom-global'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"测试单文件组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试单文件组件"}},[this._v("#")]),this._v(" 测试单文件组件")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("vue-jest")]),this._v(" 预处理器支持基本的单文件组件功能，但是目前还不能处理样式块和自定义块，这些都只在 "),e("code",[this._v("vue-loader")]),this._v(" 中支持。如果你依赖这些功能或其它 webpack 特有的配置项，那么你需要基于 webpack + "),e("code",[this._v("vue-loader")]),this._v(" 进行设置。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"相关资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#相关资料"}},[this._v("#")]),this._v(" 相关资料")])}],!1,null,null,null);e.default=a.exports}}]);